<div class="container">

  <app-page-title>Submit a new Incident Request</app-page-title>
  <mat-divider class="title-divider"></mat-divider>

  <div class="form-container">
    <form (ngSubmit)="onSubmit()" [formGroup]="newIncidentForm">

      <div class="form-group">
        <mat-form-field appearance="outline">
          <mat-label>Incident Title</mat-label>
          <input matInput placeholder="Enter here" formControlName="incidentTitle" autocomplete="off">
          <mat-error>
            <app-control-messages [control]="f['incidentTitle']"></app-control-messages>
          </mat-error>
        </mat-form-field>
      </div>
      <div class="form-group">
        <mat-form-field appearance="outline">
          <mat-label>Incident Type</mat-label>
          <mat-select name="incidentType" formControlName="incidentType">
            <mat-option *ngFor="let incidentType of IncidentTypes" [value]="incidentType.value">
              {{incidentType.viewValue}}
            </mat-option>
          </mat-select>
          <mat-error>
            <app-control-messages [control]="f['incidentType']"></app-control-messages>
          </mat-error>
        </mat-form-field>
      </div>






      <div class="form-group">

        <mat-form-field appearance="outline">
          <mat-label>Incident Description</mat-label>
          <textarea matInput placeholder="Enter here" formControlName="incidentDesc" autocomplete="off"></textarea>
          <mat-error>
            <app-control-messages [control]="f['incidentDesc']"></app-control-messages>
          </mat-error>
        </mat-form-field>

      </div>

      <div class="form-group">
        <div class="input-group">

          <!-- <input #imageInput hidden="true" name="file" type="file" onclick="this.value=null" id="inputGroupFile01"
          (change)="onImageSelected($event.target.files)" accept="image/*" />
        <button mat-flat-button color="primary" (click)="imageInput.click()">Add Image</button>
        <label  for="inputGroupFile01" #labelFileUpload>Choose file</label>
       -->

          <!-- <app-mat-file-upload (imageSelected)="onFileComplete($event)"></app-mat-file-upload> -->
        </div>

        <!-- <nfd-file-input #fileInput containerDivClass="file-input-demo" (filesRejected)="onFilesRejected($event)" allowedExtensions="pdf,doc,docx,xls,xlsx,json" [maxFileSize]="4194304"> -->
          <nfd-file-input #fileInput containerDivClass="file-input-demo"  allowedExtensions="jpg" [maxFileSize]="4194304">

          <ng-container *ngIf="fileInput.filesSelected; then filesSelected else noFilesSelected"></ng-container>
          <!-- If there are selected files, then show them in a list. -->
          <ng-template #filesSelected>
            <ul class="file-list">
              <li *ngFor="let file of fileInput.selectedFiles">
                {{file['name']}}
              </li>
            </ul>
          </ng-template>
          <ng-template #noFilesSelected>
            <!-- If there are no selected files, then tell the user to either
            click / drag or to drop, depending on whether files are currently
            being dragged. -->
            <ng-container *ngIf="fileInput.dragging; then dragging else notDragging"></ng-container>
            <ng-template #dragging>Drop Files Here</ng-template>
            <ng-template #notDragging>Click or Drag Files Here</ng-template>
          </ng-template>
        </nfd-file-input>
        <!-- Show a "Clear Selection" button when files are selected in order to demonstrate the clearSelection functionality.-->
        <input type="button" *ngIf="fileInput.filesSelected" (click)="fileInput.clearSelection()" value="Clear Selection">



      </div>

      <img [src]="imgURL" height="200" *ngIf="imgURL">


      <div class="form-group">

        <button mat-raised-button type="submit" color="accent" type="submit" [disabled]="newIncidentForm.invalid">
          <span> Submit</span>
        </button>
      </div>

    </form>
  </div>


  <!-- <app-google-map></app-google-map> -->




  <!-- <form (ngSubmit)="onSubmit()" [formGroup]="newIncidentForm">

    <div class="form-group">
      <label for="incidentTitle">Incident Title</label>
      <input type="text" class="form-control" id="incidentTitle" placeholder="Enter here"
        formControlName="incidentTitle">
      <app-control-messages [control]="f['incidentTitle']"></app-control-messages>
    </div>

    <div class="form-group">
      <label for="incidentType">Incident Type</label>
      <select class="form-control" id="incidentType" formControlName="incidentType">
        <option *ngFor="let incidentType of IncidentTypes" [value]="incidentType.value">
          {{incidentType.viewValue}}
        </option>
      </select>
      <app-control-messages [control]="f['incidentType']"></app-control-messages>
    </div>

    <div class="form-group">
      <label for="incidentDesc">Incident Description</label>
      <textarea class="form-control" id="incidentDesc" formControlName="incidentDesc">

      </textarea>
      <app-control-messages [control]="f['incidentDesc']"></app-control-messages>
    </div>

    <div class="form-group">
      <div class="input-group">
        <div class="input-group-prepend">
          <span class="input-group-text" id="inputGroupFileAddon01">Upload</span>
        </div>
        <div class="custom-file">
          <input type="file" name="file" id="inputGroupFile01" accept='image/*' aria-describedby="inputGroupFileAddon01"
            (change)="onImageSelected($event.target.files)">
          <label class="custom-file-label" for="inputGroupFile01" #labelFileUpload>Choose file</label>
        </div>
      </div>
    </div>

    <img [src]="imgURL" height="200" *ngIf="imgURL">



  </form> -->

</div>
