<div class="wizard-step-container">
  <app-wizard-step-title>{{'enter-incident-details.step.title' | translate}}</app-wizard-step-title>

  {{'enter-incident-details.step.description' | translate}}
  <div class="form-container enter-details-form">

    <form (ngSubmit)="onSubmit()" [formGroup]="newIncidentForm">

      <div class="form-group">
        <mat-form-field appearance="outline">
          <mat-label>{{'enter-incident-details.incident-category.label' | translate}}</mat-label>
          <input type="text" matInput formControlName="translatedIncidentCategory" [matAutocomplete]="auto"
            (blur)="onIncidentCategoryChanged($event.target.value)">
          <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete">
            <mat-option *ngFor="let incidentCategory of filteredDropDownIncidentCategories | async"
              [value]="incidentCategory.translatedName">
              {{incidentCategory.name | translate}}
            </mat-option>
          </mat-autocomplete>
          <mat-error>
            <app-form-error-message [control]="formControls['translatedIncidentCategory']" [errorConfig]="{
              required: 'enter-incident-details.incident-category.error-required' | translate
            }"></app-form-error-message>
          </mat-error>
        </mat-form-field>
      </div>
      <div class="form-group">
        <mat-form-field appearance="outline">
          <mat-label>{{'enter-incident-details.incident-subcategory.label' | translate}}</mat-label>
          <input type="text" matInput formControlName="translatedIncidentSubcategory" [matAutocomplete]="auto"
            (blur)="onIncidentSubcategoryChanged($event.target.value)">
          <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete">
            <mat-option *ngFor="let incidentSubcategory of filteredDropDownIncidentCategories | async"
              [value]="incidentSubcategory.translatedName">
              {{incidentSubcategory.name | translate}}
            </mat-option>
          </mat-autocomplete>
          <mat-error>
            <app-form-error-message [control]="formControls['translatedIncidentSubcategory']" [errorConfig]="{
              required: 'enter-incident-details.incident-subcategory.error-required' | translate
            }"></app-form-error-message>
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-group">

        <mat-form-field appearance="outline">
          <mat-label>{{'enter-incident-details.incident-description.label' | translate}}</mat-label>
          <textarea matInput [placeholder]="'enter-incident-details.incident-description.placeholder' | translate"
            formControlName="incidentDesc" autocomplete="off"></textarea>
          <mat-error>
            <app-form-error-message [control]="formControls['incidentDesc']" [errorConfig]="{
              required: 'enter-incident-details.incident-description.error-required' | translate,
              minLength: 'enter-incident-details.incident-description.error-minLength' | translate
            }"></app-form-error-message>
          </mat-error>
        </mat-form-field>
      </div>
    </form>
  </div>
</div>
